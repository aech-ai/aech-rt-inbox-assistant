{
  "name": "inbox-assistant",
  "type": "cli",
  "description": "Query Inbox Assistant state and preferences.",
  "command": "aech-cli-inbox-assistant",
  "actions": [
    {
      "name": "list",
      "description": "List ingested emails.",
      "parameters": [
        {
          "name": "limit",
          "type": "option",
          "required": false,
          "description": "Number of emails to list",
          "default": 20
        },
        {
          "name": "include-read",
          "type": "flag",
          "required": false,
          "description": "Include read emails"
        },
        {
          "name": "human",
          "type": "flag",
          "required": false,
          "description": "Human-readable output instead of JSON"
        }
      ]
    },
    {
      "name": "history",
      "description": "View triage history.",
      "parameters": [
        {
          "name": "limit",
          "type": "option",
          "required": false,
          "description": "Number of entries to list",
          "default": 20
        },
        {
          "name": "human",
          "type": "flag",
          "required": false,
          "description": "Human-readable output instead of JSON"
        }
      ]
    },
    {
      "name": "search",
      "description": "Search emails and attachments using full-text search.",
      "parameters": [
        {
          "name": "limit",
          "type": "option",
          "required": false,
          "description": "Number of results to return",
          "default": 20
        },
        {
          "name": "human",
          "type": "flag",
          "required": false,
          "description": "Human-readable output instead of JSON"
        }
      ]
    },
    {
      "name": "dbpath",
      "description": "Get the absolute path to the user's database.",
      "parameters": []
    },
    {
      "name": "sync-status",
      "description": "Show the sync status for all folders.",
      "parameters": [
        {
          "name": "human",
          "type": "flag",
          "required": false,
          "description": "Human-readable output instead of JSON"
        }
      ]
    },
    {
      "name": "stats",
      "description": "Show corpus statistics.",
      "parameters": [
        {
          "name": "human",
          "type": "flag",
          "required": false,
          "description": "Human-readable output instead of JSON"
        }
      ]
    },
    {
      "name": "attachment-status",
      "description": "Show attachment extraction status.",
      "parameters": [
        {
          "name": "limit",
          "type": "option",
          "required": false,
          "description": "Number of attachments to list",
          "default": 20
        },
        {
          "name": "status",
          "type": "option",
          "required": false,
          "description": "Filter by status (pending/completed/failed/skipped/extracting)"
        },
        {
          "name": "human",
          "type": "flag",
          "required": false,
          "description": "Human-readable output instead of JSON"
        }
      ]
    },
    {
      "name": "schema",
      "description": "Get the database schema (CREATE TABLE statements).",
      "parameters": []
    },
    {
      "name": "reply-needed",
      "description": "List messages currently marked as requiring a reply.",
      "parameters": [
        {
          "name": "limit",
          "type": "option",
          "required": false,
          "description": "Number of messages to list",
          "default": 20
        },
        {
          "name": "human",
          "type": "flag",
          "required": false,
          "description": "Human-readable output instead of JSON"
        }
      ]
    },
    {
      "name": "calendar-today",
      "description": "Show today's calendar events.",
      "parameters": [
        {
          "name": "human",
          "type": "flag",
          "required": false,
          "description": "Human-readable output instead of JSON"
        }
      ]
    },
    {
      "name": "calendar-week",
      "description": "Show this week's calendar events.",
      "parameters": [
        {
          "name": "human",
          "type": "flag",
          "required": false,
          "description": "Human-readable output instead of JSON"
        }
      ]
    },
    {
      "name": "calendar-upcoming",
      "description": "Show upcoming events in the next N hours.",
      "parameters": [
        {
          "name": "hours",
          "type": "option",
          "required": false,
          "description": "Number of hours to look ahead",
          "default": 24
        },
        {
          "name": "human",
          "type": "flag",
          "required": false,
          "description": "Human-readable output instead of JSON"
        }
      ]
    },
    {
      "name": "calendar-free",
      "description": "Show free time slots on a given date.",
      "parameters": [
        {
          "name": "date",
          "type": "argument",
          "required": true,
          "description": "Date to check (YYYY-MM-DD)"
        },
        {
          "name": "human",
          "type": "flag",
          "required": false,
          "description": "Human-readable output instead of JSON"
        }
      ]
    },
    {
      "name": "calendar-busy",
      "description": "Check if busy during a time range.",
      "parameters": [
        {
          "name": "start",
          "type": "argument",
          "required": true,
          "description": "Start datetime (YYYY-MM-DDTHH:MM or YYYY-MM-DD HH:MM)"
        },
        {
          "name": "end",
          "type": "argument",
          "required": true,
          "description": "End datetime"
        },
        {
          "name": "human",
          "type": "flag",
          "required": false,
          "description": "Human-readable output instead of JSON"
        }
      ]
    },
    {
      "name": "calendar-event",
      "description": "Get details of a specific calendar event.",
      "parameters": [
        {
          "name": "event_id",
          "type": "argument",
          "required": true,
          "description": "Event ID"
        },
        {
          "name": "human",
          "type": "flag",
          "required": false,
          "description": "Human-readable output instead of JSON"
        }
      ]
    },
    {
      "name": "calendar-search",
      "description": "Search calendar events by subject or attendee.",
      "parameters": [
        {
          "name": "query",
          "type": "argument",
          "required": true,
          "description": "Search query (subject or attendee email)"
        },
        {
          "name": "limit",
          "type": "option",
          "required": false,
          "description": "Number of results",
          "default": 20
        },
        {
          "name": "human",
          "type": "flag",
          "required": false,
          "description": "Human-readable output instead of JSON"
        }
      ]
    },
    {
      "name": "calendar-meetings-with",
      "description": "List meetings with a specific person.",
      "parameters": [
        {
          "name": "email",
          "type": "argument",
          "required": true,
          "description": "Email address to search for"
        },
        {
          "name": "limit",
          "type": "option",
          "required": false,
          "description": "Number of results",
          "default": 50
        },
        {
          "name": "human",
          "type": "flag",
          "required": false,
          "description": "Human-readable output instead of JSON"
        }
      ]
    },
    {
      "name": "calendar-prep",
      "description": "Prepare briefing for a meeting - includes attendee email history.",
      "parameters": [
        {
          "name": "event_id",
          "type": "argument",
          "required": false,
          "description": "Event ID (or use --next for next meeting)"
        },
        {
          "name": "next",
          "type": "flag",
          "required": false,
          "description": "Prepare for next upcoming meeting"
        },
        {
          "name": "human",
          "type": "flag",
          "required": false,
          "description": "Human-readable output instead of JSON"
        }
      ]
    },
    {
      "name": "event-create",
      "description": "Schedule a new calendar event (queued for RT service execution).",
      "parameters": [
        {
          "name": "subject",
          "type": "argument",
          "required": true,
          "description": "Event subject"
        },
        {
          "name": "start",
          "type": "argument",
          "required": true,
          "description": "Start datetime (YYYY-MM-DDTHH:MM)"
        },
        {
          "name": "end",
          "type": "argument",
          "required": true,
          "description": "End datetime (YYYY-MM-DDTHH:MM)"
        },
        {
          "name": "attendees",
          "type": "option",
          "required": false,
          "description": "Comma-separated attendee emails"
        },
        {
          "name": "location",
          "type": "option",
          "required": false,
          "description": "Location"
        },
        {
          "name": "body",
          "type": "option",
          "required": false,
          "description": "Event description"
        },
        {
          "name": "online",
          "type": "flag",
          "required": false,
          "description": "Create as Teams meeting"
        },
        {
          "name": "human",
          "type": "flag",
          "required": false,
          "description": "Human-readable output"
        }
      ]
    },
    {
      "name": "event-update",
      "description": "Update/reschedule a calendar event (queued for RT service execution).",
      "parameters": [
        {
          "name": "event_id",
          "type": "argument",
          "required": true,
          "description": "Event ID to update"
        },
        {
          "name": "subject",
          "type": "option",
          "required": false,
          "description": "New subject"
        },
        {
          "name": "start",
          "type": "option",
          "required": false,
          "description": "New start datetime"
        },
        {
          "name": "end",
          "type": "option",
          "required": false,
          "description": "New end datetime"
        },
        {
          "name": "location",
          "type": "option",
          "required": false,
          "description": "New location"
        },
        {
          "name": "human",
          "type": "flag",
          "required": false,
          "description": "Human-readable output"
        }
      ]
    },
    {
      "name": "event-cancel",
      "description": "Cancel a calendar event (queued for RT service execution).",
      "parameters": [
        {
          "name": "event_id",
          "type": "argument",
          "required": true,
          "description": "Event ID to cancel"
        },
        {
          "name": "notify",
          "type": "flag",
          "required": false,
          "description": "Send cancellation to attendees",
          "default": true
        },
        {
          "name": "human",
          "type": "flag",
          "required": false,
          "description": "Human-readable output"
        }
      ]
    },
    {
      "name": "event-respond",
      "description": "Respond to a meeting invite (queued for RT service execution).",
      "parameters": [
        {
          "name": "event_id",
          "type": "argument",
          "required": true,
          "description": "Event ID"
        },
        {
          "name": "response",
          "type": "argument",
          "required": true,
          "description": "Response: accept, tentative, or decline"
        },
        {
          "name": "human",
          "type": "flag",
          "required": false,
          "description": "Human-readable output"
        }
      ]
    },
    {
      "name": "actions-pending",
      "description": "List pending actions awaiting execution.",
      "parameters": [
        {
          "name": "human",
          "type": "flag",
          "required": false,
          "description": "Human-readable output"
        }
      ]
    },
    {
      "name": "actions-history",
      "description": "Show action execution history.",
      "parameters": [
        {
          "name": "limit",
          "type": "option",
          "required": false,
          "description": "Number of actions to show",
          "default": 20
        },
        {
          "name": "human",
          "type": "flag",
          "required": false,
          "description": "Human-readable output"
        }
      ]
    },
    {
      "name": "prefs show",
      "description": "Show the current preferences.json.",
      "parameters": []
    },
    {
      "name": "prefs set",
      "description": "Set a preference key in preferences.json.",
      "parameters": [
        {
          "name": "key",
          "type": "argument",
          "required": true,
          "description": "Preference key"
        },
        {
          "name": "value",
          "type": "argument",
          "required": true,
          "description": "Preference value (string/number/bool/JSON)"
        }
      ]
    },
    {
      "name": "prefs unset",
      "description": "Remove a preference key from preferences.json.",
      "parameters": [
        {
          "name": "key",
          "type": "argument",
          "required": true,
          "description": "Preference key"
        }
      ]
    }
  ],
  "documentation": {
    "usage": "aech-cli-inbox-assistant <command> [options]",
    "examples": [
      "aech-cli-inbox-assistant list --human",
      "aech-cli-inbox-assistant search 'query' --limit 10",
      "aech-cli-inbox-assistant reply-needed --human"
    ]
  },
  "persona": {
    "exclusive": true,
    "context_injection": "aech-cli-inbox-assistant wm snapshot --llm",
    "system_addendum": "You are the user's Executive Assistant with continuous awareness of their email, calendar, commitments, and relationships through working memory.\n\n## Working Memory Context\nYour context includes a Working Memory Snapshot with:\n- **Threads Needing Reply**: Emails awaiting the user's response. STALE means no activity for 3+ days\u2014these are overdue.\n- **Other Active Threads**: Recent conversations the user should be aware of.\n- **Pending Decisions**: Explicit questions from others awaiting the user's decision.\n- **Open Commitments**: Promises the user made to others (with due dates if known).\n- **Observations**: Context learned from CC'd emails\u2014things happening around the user.\n\n## Proactive Behaviors\n- When the user starts a conversation, briefly note any urgent items: \"I see 3 threads need your reply, including an overdue one from National HealthClaim.\"\n- If a user mentions a contact or topic, check if it relates to active threads: \"I see you have an open thread with Erik Kaas about meeting logistics.\"\n- Before meetings, correlate calendar with email: \"Your 2pm with Jane\u2014I found 3 recent email threads with her about the Q1 proposal.\"\n- Surface stale threads periodically: \"The thread with Jon about connecting from LinkedIn has been waiting 5 weeks.\"\n\n## Example Interactions\n\n**User**: \"What do I need to deal with today?\"\n**You**: Check working memory, then: \"You have 4 threads needing reply (2 are stale/overdue). There's also 1 pending decision from Ashi about meeting timing. Want me to draft responses?\"\n\n**User**: \"Tell me about my relationship with Erik Kaas\"\n**You**: Use `wm contacts --search 'erik'` and `search 'erik kaas'` to gather context, then summarize: \"Erik Kaas is from NRC-CNRC. You've exchanged 12 emails. Last thread was about a meeting location issue\u2014he couldn't find your office.\"\n\n**User**: \"Draft a reply to the HealthClaim thread\"\n**You**: Use `search` to get full thread context, then draft a reply that acknowledges the delay and addresses their recommendation.\n\n**User**: \"What's happening with the Aech deployment?\"\n**You**: Check observations and search emails: \"I see several threads about Agent Aech deployment\u2014looks like there's ongoing discussion with multiple parties. Want me to summarize the current state?\"\n\n## Tools for Deeper Context\n- `wm threads --needs-reply` \u2014 Focus on actionable items\n- `wm threads --urgency immediate` \u2014 Filter by urgency\n- `wm contacts --search 'name'` \u2014 Get relationship context\n- `wm decisions` \u2014 Pending decisions\n- `wm commitments --overdue` \u2014 Overdue promises\n- `search 'query'` \u2014 Full-text search across email corpus\n- `calendar today` / `calendar upcoming` \u2014 Schedule awareness\n- `calendar prep --next` \u2014 Prepare for upcoming meetings\n\n## Behavioral Guidelines\n- Be concise but proactive\u2014surface relevant context without being asked.\n- When drafting emails, match the user's tone from past emails.\n- For stale threads, suggest graceful follow-ups that acknowledge the delay.\n- Always offer to take action: \"Want me to draft a response?\" or \"Should I schedule time for this?\"\n- If working memory shows commitments with due dates, remind the user before they're overdue."
  }
}
