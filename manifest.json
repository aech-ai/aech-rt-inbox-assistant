{
  "name": "inbox-assistant",
  "type": "cli",
  "description": "Query Inbox Assistant state (SQLite), manage corpus, and search emails. All commands output JSON by default.",
  "command": "aech-cli-inbox-assistant",
  "actions": [
    {
      "name": "list",
      "description": "List ingested emails (JSON by default).",
      "parameters": [
        {"name": "limit", "type": "option", "required": false, "description": "Number of emails to list."},
        {"name": "include-read", "type": "flag", "required": false, "description": "Include read emails."},
        {"name": "human", "type": "flag", "required": false, "description": "Human-readable output instead of JSON."}
      ]
    },
    {
      "name": "search",
      "description": "Search emails and attachments with FTS, vector, or hybrid mode (JSON by default).",
      "parameters": [
        {"name": "query", "type": "argument", "required": true, "description": "Search query."},
        {"name": "limit", "type": "option", "required": false, "description": "Number of results to return."},
        {"name": "mode", "type": "option", "required": false, "description": "Search mode: fts, vector, or hybrid."},
        {"name": "human", "type": "flag", "required": false, "description": "Human-readable output instead of JSON."}
      ]
    },
    {
      "name": "sync-status",
      "description": "Show the sync status for all folders (JSON by default).",
      "parameters": [
        {"name": "human", "type": "flag", "required": false, "description": "Human-readable output instead of JSON."}
      ]
    },
    {
      "name": "stats",
      "description": "Show corpus statistics (emails, attachments, chunks, embeddings) (JSON by default).",
      "parameters": [
        {"name": "human", "type": "flag", "required": false, "description": "Human-readable output instead of JSON."}
      ]
    },
    {
      "name": "attachment-status",
      "description": "Show attachment extraction status (JSON by default).",
      "parameters": [
        {"name": "limit", "type": "option", "required": false, "description": "Number of attachments to list."},
        {"name": "status", "type": "option", "required": false, "description": "Filter by status (pending/success/failed/unsupported)."},
        {"name": "human", "type": "flag", "required": false, "description": "Human-readable output instead of JSON."}
      ]
    },
    {
      "name": "history",
      "description": "View triage history (JSON by default).",
      "parameters": [
        {"name": "limit", "type": "option", "required": false, "description": "Number of entries to list."},
        {"name": "human", "type": "flag", "required": false, "description": "Human-readable output instead of JSON."}
      ]
    },
    {
      "name": "reply-needed",
      "description": "List messages currently marked as requiring a reply (JSON by default).",
      "parameters": [
        {"name": "limit", "type": "option", "required": false, "description": "Number of messages to list."},
        {"name": "human", "type": "flag", "required": false, "description": "Human-readable output instead of JSON."}
      ]
    },
    {
      "name": "dbpath",
      "description": "Print the resolved SQLite DB path.",
      "parameters": []
    },
    {
      "name": "schema",
      "description": "Print CREATE TABLE statements from SQLite.",
      "parameters": []
    },
    {
      "name": "prefs show",
      "description": "Show preferences.json (always JSON).",
      "parameters": []
    },
    {
      "name": "prefs set",
      "description": "Set a key in preferences.json.",
      "parameters": [
        {"name": "key", "type": "argument", "required": true, "description": "Preference key."},
        {"name": "value", "type": "argument", "required": true, "description": "Preference value (string/number/bool/JSON)."}
      ]
    },
    {
      "name": "prefs unset",
      "description": "Unset a key in preferences.json.",
      "parameters": [
        {"name": "key", "type": "argument", "required": true, "description": "Preference key."}
      ]
    }
  ],
  "documentation": {
    "usage": "aech-cli-inbox-assistant <command> [args]",
    "examples": [
      "aech-cli-inbox-assistant list --include-read",
      "aech-cli-inbox-assistant search 'contract renewal' --mode hybrid",
      "aech-cli-inbox-assistant stats",
      "aech-cli-inbox-assistant stats --human",
      "aech-cli-inbox-assistant sync-status",
      "aech-cli-inbox-assistant reply-needed",
      "aech-cli-inbox-assistant prefs show"
    ]
  }
}
